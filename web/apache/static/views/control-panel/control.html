<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Controles administrador</title>
    <link rel="stylesheet" href="styles.css" />
    <script src="../../checkcookie.js"></script>
  </head>
  <script>
        window.onload = checkLogin;
  </script>
  <script src="scripts.js"></script>
  <body>
    <header class="header">
      <a href="../home/home.html" class="header-logo">Popfilm</a>
      <nav class="header-nav">
        <a href="../home/home.html">Inicio</a>
        <a href="control.html">Modificar</a>
      </nav>
      <div class="account-actions">
        <a href="../control-usuario/control-usuario.html">
          <img src="../../assets/account_icon.svg" alt="Account Circle" />
        </a>
      </div>
    </header>

    <div class="container">
      <div class="add-movie-button">
        <button class="button" onclick="abrirFormulario()">Agregar Película</button>
      </div>
      <div class="table-container">
        <table>
          <thead>
            <tr>
              <th>Título</th>
              <th>Categoria</th>
              <th>Sinopsis</th>
              <th>Precio</th>
              <th>Portada</th>
              <th>Acciones</th>
            </tr>
          </thead>
          <tbody id="movie-list"></tbody>
        </table>
      </div>
    </div>

    <!-- Modal -->
    <div id="modal-form" class="modal">
      <div class="modal-content">
        <span class="close-button" onclick="cerrarFormulario()">×</span>
        <h2>Agregar Película</h2>
        <form id="movie-form" onsubmit="insertMovie(event)">
          <input type="hidden" id="movie-id" name="id" />
          <label for="titulo">Título:</label>
          <input type="text" id="titulo" name="titulo" required />

          <label for="categoria">Categoria:</label>
          <input type="text" id="categoria" name="categoria" required />

          <label for="sinopsis">Sinopsis:</label>
          <input type="text" id="sinopsis" name="sinopsis" required />

          <label for="precio">Precio:</label>
          <input type="number" id="precio" name="precio" step="0.01" min="0" required />

          <div>
            <label for="portada">Portada:</label>
            <input type="file" id="portada" name="portada" accept="image/*">
            <!-- Imagen de la portada actual -->
            <img id="portada-imagen" src="" alt="Portada" style="display: none; width: 100px; height: auto;"/>
          </div>

          <button type="submit" id="submit-btn" class="button">Guardar</button>
        </form>
      </div>
    </div>
  </body>
</html>
